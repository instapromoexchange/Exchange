<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instapromo Exchange</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase App (core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #ffd166;
            --danger: #ef476f;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .logo img {
            height: 40px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 4px;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Floating Menu Button */
        .floating-menu-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 101;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .floating-menu-btn:hover {
            transform: scale(1.1);
            background: var(--secondary);
        }

        .floating-menu-content {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: white;
            border-radius: 10px;
            padding: 15px;
            width: 200px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            display: none;
        }

        .floating-menu-content.show {
            display: block;
        }

        .floating-menu-content a {
            display: block;
            padding: 10px;
            color: var(--dark);
            text-decoration: none;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .floating-menu-content a:hover {
            color: var(--primary);
            background: #f5f5f5;
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            background: linear-gradient(rgba(67, 97, 238, 0.9), rgba(58, 12, 163, 0.9)), url('https://images.unsplash.com/photo-1533750349088-cd871a92f312?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h2 {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* Section Styles */
        section {
            padding: 60px 0;
            flex: 1;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .section-title p {
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Form Styles */
        .form-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            padding: 20px;
            background: var(--primary);
            color: white;
        }

        .card-body {
            padding: 20px;
        }

        /* Dashboard Stats */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 40px 0 20px;
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--success);
        }

        .footer-section p {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: #ddd;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--primary);
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-icons a {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .social-icons a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            nav ul {
                display: none;
            }

            .hero h2 {
                font-size: 2.2rem;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Page Specific Styles */
        .page {
            display: none;
        }

        #home-page {
            display: block;
        }

        /* Feedback Section */
        .feedback-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feedback-card {
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .feedback-card .user {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .feedback-card .user img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Brand Grid */
        .brand-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .brand-card {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .brand-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .brand-card img {
            height: 80px;
            margin-bottom: 15px;
            object-fit: contain;
        }

        /* FAQ */
        .faq-item {
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .faq-question {
            padding: 15px 20px;
            background: var(--light);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .faq-answer {
            padding: 20px;
            display: none;
        }

        .faq-answer.show {
            display: block;
        }

        /* Earning Page */
        .earning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .earning-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .earning-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .earning-card-content {
            padding: 20px;
        }

        .earning-card-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        /* How it Works */
        .process-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .process-card {
            text-align: center;
            padding: 30px 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .process-card i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .process-card h3 {
            margin-bottom: 15px;
            color: var(--secondary);
        }

        /* Contact Info */
        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .contact-card {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .contact-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            color: var(--danger);
            font-size: 14px;
            margin-top: 5px;
        }

        .success-message {
            color: var(--success);
            font-size: 14px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo" onclick="showPage('home-page')">
                <i class="fas fa-exchange-alt fa-2x"></i>
                <h1>Instapromo Exchange</h1>
            </div>
            <nav>
                <ul id="nav-links">
                    <li><a href="#" onclick="showPage('home-page')">Home</a></li>
                    <li id="login-nav"><a href="#" onclick="showPage('login-page')">Login</a></li>
                    <li id="signup-nav"><a href="#" onclick="showPage('signup-page')">Signup</a></li>
                    <li id="profile-nav" style="display: none;"><a href="#" onclick="showPage('profile-page')">Profile</a></li>
                    <li id="logout-nav" style="display: none;"><a href="#" onclick="logout()">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Floating Menu Button -->
    <div class="floating-menu-btn" onclick="toggleFloatingMenu()">
        <i class="fas fa-bars"></i>
        <div class="floating-menu-content" id="floatingMenu">
            <a href="#" onclick="showPage('home-page')">Home</a>
            <a id="float-login" href="#" onclick="showPage('login-page')">Login</a>
            <a id="float-signup" href="#" onclick="showPage('signup-page')">Signup</a>
            <a id="float-profile" href="#" onclick="showPage('profile-page')" style="display: none;">Profile</a>
            <a href="#" onclick="showPage('earning-page')">Earning</a>
            <a href="#" onclick="showPage('brand-promotion-page')">Brand Promotion</a>
            <a href="#" onclick="showPage('brand-page')">Brand</a>
            <a href="#" onclick="showPage('about-page')">About Us</a>
            <a href="#" onclick="showPage('how-it-works-page')">How It Works</a>
            <a href="#" onclick="showPage('contact-page')">Contact Us</a>
            <a href="#" onclick="showPage('faq-page')">F&Q</a>
            <a id="float-logout" href="#" onclick="logout()" style="display: none;">Logout</a>
        </div>
    </div>

    <!-- Home Page -->
    <section id="home-page" class="page">
        <div class="hero">
            <div class="container hero-content">
                <h2>Earn Money Promoting Brands</h2>
                <p>Join thousands of content creators who are earning money by promoting brands on their social media platforms</p>
                <a href="#" class="btn" onclick="handleEarnButton()">Earn Money Now</a>
            </div>
        </div>

        <div class="container">
            <div class="section-title">
                <h2>Why Choose Instapromo Exchange?</h2>
                <p>We provide the best platform for content creators and brands to collaborate</p>
            </div>

            <div class="stats-container">
                <div class="stat-card card">
                    <i class="fas fa-users"></i>
                    <h3>10,000+</h3>
                    <p>Active Users</p>
                </div>
                <div class="stat-card card">
                    <i class="fas fa-building"></i>
                    <h3>500+</h3>
                    <p>Brand Partners</p>
                </div>
                <div class="stat-card card">
                    <i class="fas fa-dollar-sign"></i>
                    <h3>$250K+</h3>
                    <p>Earned by Users</p>
                </div>
            </div>

            <div class="section-title">
                <h2>What Our Users Say</h2>
                <p>Hear from our successful content creators</p>
            </div>

            <div class="feedback-container">
                <div class="feedback-card">
                    <div class="user">
                        <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="User">
                        <div>
                            <h4>Sarah Johnson</h4>
                            <p>Instagram Influencer</p>
                        </div>
                    </div>
                    <p>"I've earned over $5,000 in just three months by promoting brands through Instapromo Exchange. It's so easy to use!"</p>
                </div>
                <div class="feedback-card">
                    <div class="user">
                        <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="User">
                        <div>
                            <h4>Michael Chen</h4>
                            <p>TikTok Creator</p>
                        </div>
                    </div>
                    <p>"The platform connects me with brands that match my content style. I've done 15 promotions already!"</p>
                </div>
                <div class="feedback-card">
                    <div class="user">
                        <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User">
                        <div>
                            <h4>Jessica Williams</h4>
                            <p>YouTube Vlogger</p>
                        </div>
                    </div>
                    <p>"Withdrawing earnings is quick and easy. I love how transparent the process is from start to finish."</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Page -->
    <section id="login-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Login to Your Account</h2>
                <p>Access your Instapromo Exchange dashboard</p>
            </div>

            <div class="form-container">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" class="form-control" placeholder="Enter your password">
                </div>
                <div id="login-error" class="error-message"></div>
                <button class="btn" style="width: 100%;" onclick="login()" id="login-btn">
                    <span id="login-text">Login</span>
                    <span id="login-spinner" class="loading" style="display: none;"></span>
                </button>
                <p style="text-align: center; margin-top: 20px;">
                    Don't have an account? <a href="#" onclick="showPage('signup-page')" style="color: var(--primary);">Sign up here</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Signup Page -->
    <section id="signup-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Create an Account</h2>
                <p>Join Instapromo Exchange today and start earning</p>
            </div>

            <div class="form-container">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" class="form-control" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="signup-social">Social Media Profile URL</label>
                    <input type="url" id="signup-social" class="form-control" placeholder="Paste your profile link">
                </div>
                <div class="form-group">
                    <label for="signup-followers">Number of Followers</label>
                    <input type="number" id="signup-followers" class="form-control" placeholder="Enter approximate number">
                </div>
                <div class="form-group">
                    <label for="signup-phone">Phone Number</label>
                    <input type="tel" id="signup-phone" class="form-control" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" class="form-control" placeholder="Create a strong password">
                </div>
                <div id="signup-error" class="error-message"></div>
                <button class="btn" style="width: 100%;" onclick="signup()" id="signup-btn">
                    <span id="signup-text">Sign Up</span>
                    <span id="signup-spinner" class="loading" style="display: none;"></span>
                </button>
                <p style="text-align: center; margin-top: 20px;">
                    Already have an account? <a href="#" onclick="showPage('login-page')" style="color: var(--primary);">Login here</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Profile Page -->
    <section id="profile-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Your Profile</h2>
                <p>Manage your account and track your earnings</p>
            </div>

            <div class="stats-container">
                <div class="stat-card card">
                    <i class="fas fa-dollar-sign"></i>
                    <h3 id="total-earnings">$0</h3>
                    <p>Total Earnings</p>
                </div>
                <div class="stat-card card">
                    <i class="fas fa-wallet"></i>
                    <h3 id="available-earnings">$0</h3>
                    <p>Available for Withdrawal</p>
                </div>
                <div class="stat-card card">
                    <i class="fas fa-paper-plane"></i>
                    <h3 id="total-submissions">0</h3>
                    <p>Total Submissions</p>
                </div>
                <div class="stat-card card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="approved-submissions">0</h3>
                    <p>Approved Submissions</p>
                </div>
            </div>

            <div class="form-container">
                <h3 style="margin-bottom: 20px; text-align: center;">Submit Your Reels/Video/Story</h3>
                <div class="form-group">
                    <label for="content-type">Content Type</label>
                    <select id="content-type" class="form-control">
                        <option value="">Select Content Type</option>
                        <option value="reels">Reels</option>
                        <option value="video">Video</option>
                        <option value="story">Story</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="content-link">Content Link</label>
                    <input type="url" id="content-link" class="form-control" placeholder="Paste your content link">
                </div>
                <div id="content-error" class="error-message"></div>
                <div id="content-success" class="success-message"></div>
                <button class="btn" style="width: 100%;" onclick="submitContent()" id="content-btn">
                    <span id="content-text">Submit Content</span>
                    <span id="content-spinner" class="loading" style="display: none;"></span>
                </button>
            </div>

            <div style="margin-top: 40px;">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('withdrawal')">Withdrawal</div>
                    <div class="tab" onclick="switchTab('history')">Submission History</div>
                </div>

                <div id="withdrawal-tab" class="tab-content active">
                    <div class="form-container">
                        <div class="tabs">
                            <div class="tab active" onclick="switchWithdrawalTab('upi')">UPI</div>
                            <div class="tab" onclick="switchWithdrawalTab('bank')">Bank Transfer</div>
                        </div>

                        <div id="upi-tab" class="tab-content active">
                            <div class="form-group">
                                <label for="upi-name">Your Name</label>
                                <input type="text" id="upi-name" class="form-control" placeholder="Enter your name as in bank">
                            </div>
                            <div class="form-group">
                                <label for="upi-id">UPI ID</label>
                                <input type="text" id="upi-id" class="form-control" placeholder="Enter your UPI ID">
                            </div>
                            <div class="form-group">
                                <label for="withdraw-amount">Amount to Withdraw</label>
                                <input type="number" id="withdraw-amount" class="form-control" placeholder="Enter amount">
                            </div>
                            <div id="withdraw-error" class="error-message"></div>
                            <div id="withdraw-success" class="success-message"></div>
                            <button class="btn" style="width: 100%;" onclick="withdraw('upi')" id="withdraw-btn">
                                <span id="withdraw-text">Withdraw via UPI</span>
                                <span id="withdraw-spinner" class="loading" style="display: none;"></span>
                            </button>
                        </div>

                        <div id="bank-tab" class="tab-content">
                            <div class="form-group">
                                <label for="bank-name">Your Name</label>
                                <input type="text" id="bank-name" class="form-control" placeholder="Enter your name as in bank">
                            </div>
                            <div class="form-group">
                                <label for="bank-phone">Phone Number</label>
                                <input type="tel" id="bank-phone" class="form-control" placeholder="Enter your phone number">
                            </div>
                            <div class="form-group">
                                <label for="account-number">Account Number</label>
                                <input type="text" id="account-number" class="form-control" placeholder="Enter your account number">
                            </div>
                            <div class="form-group">
                                <label for="ifsc-code">IFSC Code</label>
                                <input type="text" id="ifsc-code" class="form-control" placeholder="Enter IFSC code">
                            </div>
                            <div class="form-group">
                                <label for="bank-withdraw-amount">Amount to Withdraw</label>
                                <input type="number" id="bank-withdraw-amount" class="form-control" placeholder="Enter amount">
                            </div>
                            <div id="bank-withdraw-error" class="error-message"></div>
                            <div id="bank-withdraw-success" class="success-message"></div>
                            <button class="btn" style="width: 100%;" onclick="withdraw('bank')" id="bank-withdraw-btn">
                                <span id="bank-withdraw-text">Withdraw via Bank Transfer</span>
                                <span id="bank-withdraw-spinner" class="loading" style="display: none;"></span>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="history-tab" class="tab-content">
                    <div class="form-container">
                        <h3 style="margin-bottom: 20px;">Your Submission History</h3>
                        <div id="submission-history">
                            <p style="text-align: center; padding: 20px;">Loading your submission history...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Earning Page -->
    <section id="earning-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Available Promotions</h2>
                <p>Complete these promotions to earn money</p>
            </div>

            <div class="earning-grid" id="promotions-container">
                <div class="earning-card">
                    <img src="https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" alt="Nike Promotion">
                    <div class="earning-card-content">
                        <h3>Nike Sportswear</h3>
                        <p>Create a reel showcasing Nike's new sportswear collection. Tag @nike and use #JustDoIt</p>
                        <p><strong>Earnings: $80</strong></p>
                        <div class="earning-card-actions">
                            <button class="btn" style="padding: 8px 15px;">Copy Link</button>
                            <button class="btn" style="padding: 8px 15px;">Download Assets</button>
                        </div>
                    </div>
                </div>

                <div class="earning-card">
                    <img src="https://images.unsplash.com/photo-1605733513597-a8f8341084e6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1720&q=80" alt="Starbucks Promotion">
                    <div class="earning-card-content">
                        <h3>Starbucks Summer Drinks</h3>
                        <p>Share a story about your favorite Starbucks summer drink. Tag @starbucks and use #StarbucksSummer</p>
                        <p><strong>Earnings: $45</strong></p>
                        <div class="earning-card-actions">
                            <button class="btn" style="padding: 8px 15px;">Copy Link</button>
                            <button class="btn" style="padding: 8px 15px;">Download Assets</button>
                        </div>
                    </div>
                </div>

                <div class="earning-card">
                    <img src="https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" alt="Apple Promotion">
                    <div class="earning-card-content">
                        <h3>Apple iPhone 14</h3>
                        <p>Create a video review of iPhone 14's camera features. Tag @apple and use #iPhone14</p>
                        <p><strong>Earnings: $120</strong></p>
                        <div class="earning-card-actions">
                            <button class="btn" style="padding: 8px 15px;">Copy Link</button>
                            <button class="btn" style="padding: 8px 15px;">Download Assets</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Brand Promotion Page -->
    <section id="brand-promotion-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Brand Promotion</h2>
                <p>Promote these brands and earn money</p>
            </div>

            <div class="brand-grid">
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/04/Apple-Logo.png" alt="Apple">
                    <h3>Apple</h3>
                    <p>Earn up to $150 per promotion</p>
                </div>
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/04/Nike-Logo.png" alt="Nike">
                    <h3>Nike</h3>
                    <p>Earn up to $100 per promotion</p>
                </div>
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/09/Starbucks-Logo.png" alt="Starbucks">
                    <h3>Starbucks</h3>
                    <p>Earn up to $60 per promotion</p>
                </div>
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/07/Adidas-Logo.png" alt="Adidas">
                    <h3>Adidas</h3>
                    <p>Earn up to $90 per promotion</p>
                </div>
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/04/Samsung-Logo.png" alt="Samsung">
                    <h3>Samsung</h3>
                    <p>Earn up to $130 per promotion</p>
                </div>
                <div class="brand-card">
                    <img src="https://logos-world.net/wp-content/uploads/2020/04/Amazon-Logo.png" alt="Amazon">
                    <h3>Amazon</h3>
                    <p>Earn up to $80 per promotion</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Brand Page -->
    <section id="brand-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>For Brands</h2>
                <p>Connect with content creators to promote your brand</p>
            </div>

            <div class="form-container">
                <h3 style="margin-bottom: 20px; text-align: center;">Brand Registration</h3>
                <div class="form-group">
                    <label for="brand-name">Brand Name</label>
                    <input type="text" id="brand-name" class="form-control" placeholder="Enter your brand name">
                </div>
                <div class="form-group">
                    <label for="brand-industry">Industry</label>
                    <input type="text" id="brand-industry" class="form-control" placeholder="Enter your industry">
                </div>
                <div class="form-group">
                    <label for="brand-website">Website</label>
                    <input type="url" id="brand-website" class="form-control" placeholder="Enter your website URL">
                </div>
                <div class="form-group">
                    <label for="brand-email">Email</label>
                    <input type="email" id="brand-email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="brand-phone">Phone Number</label>
                    <input type="tel" id="brand-phone" class="form-control" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="brand-message">Message</label>
                    <textarea id="brand-message" class="form-control" rows="4" placeholder="Tell us about your campaign"></textarea>
                </div>
                <button class="btn" style="width: 100%;">Submit</button>
            </div>
        </div>
    </section>

    <!-- About Us Page -->
    <section id="about-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>About Us</h2>
                <p>Learn more about Instapromo Exchange</p>
            </div>

            <div class="form-container">
                <h3>Our Mission</h3>
                <p style="margin-bottom: 20px;">At Instapromo Exchange, we aim to bridge the gap between content creators and brands, creating a seamless platform for collaborations that benefit both parties.</p>

                <h3>Our Story</h3>
                <p style="margin-bottom: 20px;">Founded in 2020, we started with a simple idea: to help content creators monetize their influence while providing brands with authentic promotion opportunities. Today, we have facilitated over 50,000 successful promotions.</p>

                <h3>Our Team</h3>
                <p>Our team consists of marketing experts, developers, and relationship managers who are dedicated to making Instapromo Exchange the best platform for influencer marketing.</p>
            </div>
        </div>
    </section>

    <!-- How It Works Page -->
    <section id="how-it-works-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>How It Works</h2>
                <p>Start earning in just a few simple steps</p>
            </div>

            <div class="process-container">
                <div class="process-card">
                    <i class="fas fa-user-plus"></i>
                    <h3>Create an Account</h3>
                    <p>Sign up and complete your profile with your social media details</p>
                </div>
                <div class="process-card">
                    <i class="fas fa-tasks"></i>
                    <h3>Choose Promotions</h3>
                    <p>Browse available promotions from top brands and select ones that match your audience</p>
                </div>
                <div class="process-card">
                    <i class="fas fa-video"></i>
                    <h3>Create Content</h3>
                    <p>Create engaging content as per the brand's guidelines and publish it on your social media</p>
                </div>
                <div class="process-card">
                    <i class="fas fa-link"></i>
                    <h3>Submit Your Work</h3>
                    <p>Submit the link to your content through our platform for review</p>
                </div>
                <div class="process-card">
                    <i class="fas fa-check-circle"></i>
                    <h3>Get Approved</h3>
                    <p>Once approved by the brand, your earnings will be credited to your account</p>
                </div>
                <div class="process-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>Withdraw Earnings</h3>
                    <p>Withdraw your earnings through UPI or bank transfer</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Us Page -->
    <section id="contact-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Contact Us</h2>
                <p>Get in touch with our team</p>
            </div>

            <div class="form-container">
                <div class="form-group">
                    <label for="contact-name">Your Name</label>
                    <input type="text" id="contact-name" class="form-control" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="contact-email">Email</label>
                    <input type="email" id="contact-email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="contact-subject">Subject</label>
                    <input type="text" id="contact-subject" class="form-control" placeholder="Enter subject">
                </div>
                <div class="form-group">
                    <label for="contact-message">Message</label>
                    <textarea id="contact-message" class="form-control" rows="4" placeholder="Enter your message"></textarea>
                </div>
                <button class="btn" style="width: 100%;">Send Message</button>
            </div>

            <div class="contact-info">
                <div class="contact-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Address</h3>
                    <p>123 Business Avenue, Suite 500</p>
                    <p>Mumbai, India 400001</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-phone"></i>
                    <h3>Phone</h3>
                    <p>+91 98765 43210</p>
                    <p>+91 91234 56789</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p>info@instapromo.com</p>
                    <p>support@instapromo.com</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Page -->
    <section id="faq-page" class="page">
        <div class="container">
            <div class="section-title">
                <h2>Frequently Asked Questions</h2>
                <p>Find answers to common questions about Instapromo Exchange</p>
            </div>

            <div class="form-container">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        How do I get paid? <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Once your content is approved by the brand, your earnings will be credited to your Instapromo account. You can withdraw your earnings via UPI or bank transfer. Withdrawals are processed within 3-5 business days.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        What are the requirements to join? <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>You need to have an active social media profile (Instagram, YouTube, TikTok, etc.) with at least 1000 followers. Some promotions may have specific requirements based on the brand's preferences.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        How long does approval take? <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Typically, brands review submissions within 3-7 days. You'll receive a notification once your content is approved or if any changes are requested.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        Can I promote multiple brands at once? <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, you can work on multiple promotions simultaneously as long as you can create quality content for each brand and meet the submission deadlines.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        Is there any fee to join? <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>No, joining Instapromo Exchange is completely free for content creators. We only deduct a small platform fee from your earnings once you complete a promotion.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Instapromo Exchange</h3>
                    <p>The leading platform connecting content creators with brands for mutual growth and success.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <a href="#" onclick="showPage('home-page')">Home</a>
                    <a href="#" onclick="showPage('earning-page')">Earning</a>
                    <a href="#" onclick="showPage('brand-promotion-page')">Brand Promotion</a>
                    <a href="#" onclick="showPage('about-page')">About Us</a>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <a href="#" onclick="showPage('faq-page')">FAQ</a>
                    <a href="#" onclick="showPage('contact-page')">Contact Us</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Privacy Policy</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Instapromo Exchange. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase Configuration and App Script -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBm4VTr__mag1trF4jPZCgqt7gWwBItD58",
            authDomain: "exchange-a725e.firebaseapp.com",
            databaseURL: "https://exchange-a725e-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "exchange-a725e",
            storageBucket: "exchange-a725e.firebasestorage.app",
            messagingSenderId: "47165517524",
            appId: "1:47165517524:web:7712aae884de7a498a1541"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const navLinks = document.getElementById('nav-links');
        const floatingMenu = document.getElementById('floatingMenu');
        
        // Show specific page and hide others
        function showPage(pageId) {
            pages.forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
            window.scrollTo(0, 0);
            
            // If user is logged in, update UI accordingly
            updateUI();
        }

        // Toggle floating menu
        function toggleFloatingMenu() {
            floatingMenu.classList.toggle('show');
        }

        // Toggle FAQ answers
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('show');
            
            const icon = element.querySelector('i');
            if (icon.classList.contains('fa-chevron-down')) {
                icon.classList.replace('fa-chevron-down', 'fa-chevron-up');
            } else {
                icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
            }
        }

        // Switch tabs
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activate selected tab
            document.querySelector(`.tab:nth-child(${tabName === 'withdrawal' ? 1 : 2})`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Switch withdrawal tabs
        function switchWithdrawalTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('#withdrawal-tab .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('#withdrawal-tab .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activate selected tab
            document.querySelector(`#withdrawal-tab .tab:nth-child(${tabName === 'upi' ? 1 : 2})`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Handle Earn Button based on auth state
        function handleEarnButton() {
            auth.onAuthStateChanged(user => {
                if (user) {
                    showPage('earning-page');
                } else {
                    showPage('signup-page');
                }
            });
        }

        // Update UI based on authentication state
        function updateUI() {
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    document.getElementById('login-nav').style.display = 'none';
                    document.getElementById('signup-nav').style.display = 'none';
                    document.getElementById('profile-nav').style.display = 'list-item';
                    document.getElementById('logout-nav').style.display = 'list-item';
                    
                    document.getElementById('float-login').style.display = 'none';
                    document.getElementById('float-signup').style.display = 'none';
                    document.getElementById('float-profile').style.display = 'block';
                    document.getElementById('float-logout').style.display = 'block';
                    
                    // Load user data if on profile page
                    if (document.getElementById('profile-page').style.display === 'block') {
                        loadUserData(user.uid);
                    }
                } else {
                    // User is signed out
                    document.getElementById('login-nav').style.display = 'list-item';
                    document.getElementById('signup-nav').style.display = 'list-item';
                    document.getElementById('profile-nav').style.display = 'none';
                    document.getElementById('logout-nav').style.display = 'none';
                    
                    document.getElementById('float-login').style.display = 'block';
                    document.getElementById('float-signup').style.display = 'block';
                    document.getElementById('float-profile').style.display = 'none';
                    document.getElementById('float-logout').style.display = 'none';
                }
            });
        }

        // Login function
        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorElement = document.getElementById('login-error');
            const loginBtn = document.getElementById('login-btn');
            const loginText = document.getElementById('login-text');
            const loginSpinner = document.getElementById('login-spinner');
            
            // Validate inputs
            if (!email || !password) {
                errorElement.textContent = 'Please fill in all fields';
                return;
            }
            
            // Show loading state
            loginText.textContent = 'Logging in...';
            loginSpinner.style.display = 'inline-block';
            loginBtn.disabled = true;
            
            // Sign in with email and password
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    showPage('profile-page');
                })
                .catch((error) => {
                    const errorCode = error.code;
                    let errorMessage = error.message;
                    
                    if (errorCode === 'auth/user-not-found') {
                        errorMessage = 'No account found with this email';
                    } else if (errorCode === 'auth/wrong-password') {
                        errorMessage = 'Incorrect password';
                    }
                    
                    errorElement.textContent = errorMessage;
                })
                .finally(() => {
                    // Reset button state
                    loginText.textContent = 'Login';
                    loginSpinner.style.display = 'none';
                    loginBtn.disabled = false;
                });
        }

        // Signup function
        function signup() {
            const name = document.getElementById('signup-name').value;
            const social = document.getElementById('signup-social').value;
            const followers = document.getElementById('signup-followers').value;
            const phone = document.getElementById('signup-phone').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const errorElement = document.getElementById('signup-error');
            const signupBtn = document.getElementById('signup-btn');
            const signupText = document.getElementById('signup-text');
            const signupSpinner = document.getElementById('signup-spinner');
            
            // Validate inputs
            if (!name || !social || !followers || !phone || !email || !password) {
                errorElement.textContent = 'Please fill in all fields';
                return;
            }
            
            if (password.length < 6) {
                errorElement.textContent = 'Password should be at least 6 characters';
                return;
            }
            
            // Show loading state
            signupText.textContent = 'Creating account...';
            signupSpinner.style.display = 'inline-block';
            signupBtn.disabled = true;
            
            // Create user with email and password
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Signed up 
                    const user = userCredential.user;
                    
                    // Save additional user data to Firestore
                    return db.collection('users').doc(user.uid).set({
                        name: name,
                        social: social,
                        followers: followers,
                        phone: phone,
                        email: email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        totalEarnings: 0,
                        availableEarnings: 0,
                        totalSubmissions: 0,
                        approvedSubmissions: 0
                    });
                })
                .then(() => {
                    showPage('profile-page');
                })
                .catch((error) => {
                    const errorCode = error.code;
                    let errorMessage = error.message;
                    
                    if (errorCode === 'auth/email-already-in-use') {
                        errorMessage = 'Email is already registered';
                    } else if (errorCode === 'auth/weak-password') {
                        errorMessage = 'Password is too weak';
                    } else if (errorCode === 'auth/invalid-email') {
                        errorMessage = 'Email address is invalid';
                    }
                    
                    errorElement.textContent = errorMessage;
                })
                .finally(() => {
                    // Reset button state
                    signupText.textContent = 'Sign Up';
                    signupSpinner.style.display = 'none';
                    signupBtn.disabled = false;
                });
        }

        // Logout function
        function logout() {
            auth.signOut()
                .then(() => {
                    showPage('home-page');
                })
                .catch((error) => {
                    console.error('Logout error:', error);
                });
        }

        // Load user data
        function loadUserData(userId) {
            db.collection('users').doc(userId).get()
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        document.getElementById('total-earnings').textContent = `$${userData.totalEarnings || 0}`;
                        document.getElementById('available-earnings').textContent = `$${userData.availableEarnings || 0}`;
                        document.getElementById('total-submissions').textContent = userData.totalSubmissions || 0;
                        document.getElementById('approved-submissions').textContent = userData.approvedSubmissions || 0;
                    }
                })
                .catch((error) => {
                    console.error('Error loading user data:', error);
                });
        }

        // Submit content for promotion
        function submitContent() {
            const user = auth.currentUser;
            if (!user) {
                showPage('login-page');
                return;
            }
            
            const contentType = document.getElementById('content-type').value;
            const contentLink = document.getElementById('content-link').value;
            const errorElement = document.getElementById('content-error');
            const successElement = document.getElementById('content-success');
            const contentBtn = document.getElementById('content-btn');
            const contentText = document.getElementById('content-text');
            const contentSpinner = document.getElementById('content-spinner');
            
            // Validate inputs
            if (!contentType || !contentLink) {
                errorElement.textContent = 'Please fill in all fields';
                return;
            }
            
            // Show loading state
            contentText.textContent = 'Submitting...';
            contentSpinner.style.display = 'inline-block';
            contentBtn.disabled = true;
            errorElement.textContent = '';
            successElement.textContent = '';
            
            // Save content submission to Firestore
            db.collection('submissions').add({
                userId: user.uid,
                contentType: contentType,
                contentLink: contentLink,
                status: 'pending',
                submittedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                successElement.textContent = 'Content submitted successfully! It will be reviewed by the brand.';
                
                // Clear form
                document.getElementById('content-type').value = '';
                document.getElementById('content-link').value = '';
                
                // Update user stats
                return db.collection('users').doc(user.uid).update({
                    totalSubmissions: firebase.firestore.FieldValue.increment(1)
                });
            })
            .then(() => {
                // Reload user data
                loadUserData(user.uid);
            })
            .catch((error) => {
                errorElement.textContent = 'Error submitting content: ' + error.message;
            })
            .finally(() => {
                // Reset button state
                contentText.textContent = 'Submit Content';
                contentSpinner.style.display = 'none';
                contentBtn.disabled = false;
            });
        }

        // Withdraw earnings
        function withdraw(method) {
            const user = auth.currentUser;
            if (!user) {
                showPage('login-page');
                return;
            }
            
            let name, amount, errorElement, successElement, withdrawBtn, withdrawText, withdrawSpinner;
            
            if (method === 'upi') {
                name = document.getElementById('upi-name').value;
                const upiId = document.getElementById('upi-id').value;
                amount = document.getElementById('withdraw-amount').value;
                errorElement = document.getElementById('withdraw-error');
                successElement = document.getElementById('withdraw-success');
                withdrawBtn = document.getElementById('withdraw-btn');
                withdrawText = document.getElementById('withdraw-text');
                withdrawSpinner = document.getElementById('withdraw-spinner');
                
                if (!name || !upiId || !amount) {
                    errorElement.textContent = 'Please fill in all fields';
                    return;
                }
            } else {
                name = document.getElementById('bank-name').value;
                const phone = document.getElementById('bank-phone').value;
                const accountNumber = document.getElementById('account-number').value;
                const ifscCode = document.getElementById('ifsc-code').value;
                amount = document.getElementById('bank-withdraw-amount').value;
                errorElement = document.getElementById('bank-withdraw-error');
                successElement = document.getElementById('bank-withdraw-success');
                withdrawBtn = document.getElementById('bank-withdraw-btn');
                withdrawText = document.getElementById('bank-withdraw-text');
                withdrawSpinner = document.getElementById('bank-withdraw-spinner');
                
                if (!name || !phone || !accountNumber || !ifscCode || !amount) {
                    errorElement.textContent = 'Please fill in all fields';
                    return;
                }
            }
            
            amount = parseFloat(amount);
            if (amount <= 0) {
                errorElement.textContent = 'Amount must be greater than 0';
                return;
            }
            
            // Show loading state
            withdrawText.textContent = 'Processing...';
            withdrawSpinner.style.display = 'inline-block';
            withdrawBtn.disabled = true;
            errorElement.textContent = '';
            successElement.textContent = '';
            
            // First check if user has sufficient balance
            db.collection('users').doc(user.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        const availableEarnings = userData.availableEarnings || 0;
                        
                        if (amount > availableEarnings) {
                            throw new Error('Insufficient balance');
                        }
                        
                        // Create withdrawal request
                        return db.collection('withdrawals').add({
                            userId: user.uid,
                            method: method,
                            amount: amount,
                            status: 'pending',
                            requestedAt: firebase.firestore.FieldValue.serverTimestamp(),
                            ...(method === 'upi' ? {
                                upiId: document.getElementById('upi-id').value,
                                name: name
                            } : {
                                accountNumber: document.getElementById('account-number').value,
                                ifscCode: document.getElementById('ifsc-code').value,
                                phone: document.getElementById('bank-phone').value,
                                name: name
                            })
                        });
                    }
                })
                .then(() => {
                    // Update user's available earnings
                    return db.collection('users').doc(user.uid).update({
                        availableEarnings: firebase.firestore.FieldValue.increment(-amount)
                    });
                })
                .then(() => {
                    successElement.textContent = `Withdrawal request of $${amount} submitted successfully! It will be processed within 3-5 business days.`;
                    
                    // Clear form
                    if (method === 'upi') {
                        document.getElementById('upi-name').value = '';
                        document.getElementById('upi-id').value = '';
                        document.getElementById('withdraw-amount').value = '';
                    } else {
                        document.getElementById('bank-name').value = '';
                        document.getElementById('bank-phone').value = '';
                        document.getElementById('account-number').value = '';
                        document.getElementById('ifsc-code').value = '';
                        document.getElementById('bank-withdraw-amount').value = '';
                    }
                    
                    // Reload user data
                    loadUserData(user.uid);
                })
                .catch((error) => {
                    errorElement.textContent = error.message;
                })
                .finally(() => {
                    // Reset button state
                    withdrawText.textContent = method === 'upi' ? 'Withdraw via UPI' : 'Withdraw via Bank Transfer';
                    withdrawSpinner.style.display = 'none';
                    withdrawBtn.disabled = false;
                });
        }

        // Initialize the app
        window.onload = function() {
            showPage('home-page');
            updateUI();
            
            // Close floating menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.floating-menu-btn') && !event.target.closest('.floating-menu-content')) {
                    floatingMenu.classList.remove('show');
                }
            });
        };
    </script>
</body>
</html>